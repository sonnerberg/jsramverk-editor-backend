{"version":3,"sources":["documentReducer.js","socket.js","ClearDocument.js","ClearButton.js","SaveText.js","SaveButton.js","saveToDatabase.js","utils/getFetchURL.js","ToolBar.js","Editor.js","AllDocumentsList.js","ErrorMessage.js","SuccessMessage.js","App.js","reportWebVitals.js","index.js"],"names":["TIME_FOR_CLEARING_SETTIMEOUT","RESET","FIELD","EDIT","SUCCESS","ERROR","CLEAR_ERROR","CLEAR_SUCCESS","UPDATE_ALL_DOCUMENTS","JOIN_ROOM","LEAVE_ROOM","initialState","documentId","editorText","documentName","allDocuments","success","error","joinedRooms","documentReducer","state","action","type","payload","filter","room","fieldName","map","doc","_id","includes","indexOfDocument","findIndex","id","html","name","socket","socketIOClient","ClearDocument","xmlns","width","height","fill","className","viewBox","d","fillRule","ClearButton","props","onClick","dispatch","setTimeout","SaveText","SaveButton","requestOptions","fetchURL","method","headers","body","JSON","stringify","fetch","then","response","json","result","data","emit","value","console","errors","message","catch","saveToDatabase","ToolBar","Editor","emitDocument","useEffect","on","hasOwnProperty","onKeyUp","editor","ClassicEditor","onChange","_event","stripNewLine","replaceAll","handleDocumentNameChange","getData","config","toolbar","handleChange","AllDocumentsList","updateDocument","a","style","display","cursor","minWidth","margin","event","preventDefault","forEach","handleClick","parse","ErrorMessage","color","position","top","marginLeft","marginRight","left","right","textAlign","SuccessMessage","App","useReducer","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.9cfe0c04.chunk.js","sourcesContent":["export const TIME_FOR_CLEARING_SETTIMEOUT = 2500;\n\nexport const RESET = 'RESET';\nexport const FIELD = 'FIELD';\nexport const EDIT = 'EDIT';\nexport const SUCCESS = 'SUCCESS';\nexport const ERROR = 'ERROR';\nexport const CLEAR_ERROR = 'CLEAR_ERROR';\nexport const CLEAR_SUCCESS = 'CLEAR_SUCCESS';\nexport const UPDATE_ALL_DOCUMENTS = 'UPDATE_ALL_DOCUMENTS';\nexport const JOIN_ROOM = 'JOIN_ROOM';\nexport const LEAVE_ROOM = 'LEAVE_ROOM';\n\nexport const initialState = {\n  documentId: null,\n  editorText: '',\n  documentName: '',\n  allDocuments: [],\n  success: '',\n  error: '',\n  joinedRooms: [],\n};\n\nexport function documentReducer(state, action) {\n  switch (action.type) {\n    case JOIN_ROOM:\n      return {\n        ...state,\n        joinedRooms: [...state.joinedRooms, action.payload],\n      };\n    case LEAVE_ROOM:\n      const joinedRooms = [...state.joinedRooms].filter(\n        (room) => room !== action.payload\n      );\n      return {\n        ...state,\n        joinedRooms,\n      };\n    case FIELD:\n      return {\n        ...state,\n        [action.fieldName]: action.payload,\n      };\n    case UPDATE_ALL_DOCUMENTS:\n      // check if id exists in allDocuments\n      const documentExists = state.allDocuments\n        .map((doc) => doc._id)\n        .includes(action.payload._id);\n      if (!documentExists) {\n        // TODO: Emit document to connected sockets\n        return {\n          ...state,\n          allDocuments: [...state.allDocuments, action.payload],\n        };\n      } else {\n        // Find the object with the id and set html and name\n        const indexOfDocument = state.allDocuments.findIndex(\n          (doc) => doc._id === action.payload._id\n        );\n        // Create a copy of allDocuments\n        const allDocuments = [...state.allDocuments];\n        allDocuments[indexOfDocument] = action.payload;\n        return {\n          ...state,\n          allDocuments,\n        };\n      }\n    case CLEAR_SUCCESS:\n      return {\n        ...state,\n        success: '',\n      };\n    case CLEAR_ERROR:\n      return {\n        ...state,\n        error: '',\n      };\n    case ERROR:\n      return {\n        ...state,\n        error:\n          action.payload === 'Document failed validation'\n            ? 'Both name and content needed'\n            : action.payload,\n        success: '',\n      };\n    case SUCCESS:\n      return {\n        ...state,\n        success: action.payload,\n        error: '',\n      };\n    case EDIT:\n      return {\n        ...state,\n        documentId: action.payload.id,\n        editorText: action.payload.html,\n        documentName: action.payload.name,\n      };\n    case RESET:\n      return {\n        ...state,\n        documentId: '',\n        editorText: '',\n        documentName: '',\n        success: '',\n      };\n    default:\n      return state;\n  }\n}\n","import socketIOClient from 'socket.io-client';\n\nconst ENDPOINT = process.env.NODE_ENV === 'production' ? 'https://jsramverk-editor-pene14.azurewebsites.net/' :  'http://127.0.0.1:1337';\n\nexport const socket = socketIOClient(ENDPOINT);\n","import React from 'react';\n\nexport const ClearDocument = () => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"16\"\n    height=\"16\"\n    fill=\"currentColor\"\n    className=\"bi bi-trash\"\n    viewBox=\"0 0 16 16\"\n  >\n    <path d=\"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z\" />\n    <path\n      fillRule=\"evenodd\"\n      d=\"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z\"\n    />\n  </svg>\n);\n","import React from 'react';\nimport {\n  CLEAR_SUCCESS,\n  RESET,\n  SUCCESS,\n  TIME_FOR_CLEARING_SETTIMEOUT,\n} from './documentReducer.js';\nimport { ClearDocument } from './ClearDocument.js';\n\nexport function ClearButton(props) {\n  return (\n    <button // className=\"ql-save\"\n      onClick={() => {\n        props.dispatch({\n          type: RESET,\n        });\n        props.dispatch({\n          type: SUCCESS,\n          payload: 'Changes trashed, new document ready',\n        });\n        setTimeout(() => {\n          props.dispatch({\n            type: CLEAR_SUCCESS,\n          });\n        }, TIME_FOR_CLEARING_SETTIMEOUT);\n      }}\n    >\n      <ClearDocument />\n    </button>\n  );\n}\n","import React from 'react';\n\nexport const SaveText = () => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"16\"\n    height=\"16\"\n    fill=\"currentColor\"\n    className=\"bi bi-save\"\n    viewBox=\"0 0 16 16\"\n  >\n    <path d=\"M2 1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H9.5a1 1 0 0 0-1 1v7.293l2.646-2.647a.5.5 0 0 1 .708.708l-3.5 3.5a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L7.5 9.293V2a2 2 0 0 1 2-2H14a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h2.5a.5.5 0 0 1 0 1H2z\" />\n  </svg>\n);\n","import React from 'react';\nimport { saveToDatabase } from './saveToDatabase.js';\nimport { SaveText } from './SaveText.js';\n\nexport function SaveButton(props) {\n  return (\n    <button\n      onClick={() => {\n        saveToDatabase({\n          documentName: props.documentName,\n          editorText: props.editorText,\n          documentId: props.documentId,\n          dispatch: props.dispatch,\n        });\n      }}\n    >\n      <SaveText />\n    </button>\n  );\n}\n","import {\n  CLEAR_ERROR,\n  ERROR,\n  FIELD,\n  JOIN_ROOM,\n  TIME_FOR_CLEARING_SETTIMEOUT,\n  UPDATE_ALL_DOCUMENTS,\n} from './documentReducer';\nimport { socket } from './socket';\nimport { getFetchURL } from './utils/getFetchURL';\n\nexport function saveToDatabase({\n  documentId: id,\n  documentName: name,\n  editorText: html,\n  dispatch,\n}) {\n  let requestOptions;\n  let fetchURL = getFetchURL();\n  if (!id) {\n    fetchURL = `${fetchURL}/create`;\n    requestOptions = {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        name,\n        html,\n      }),\n    };\n  } else {\n    fetchURL = `${fetchURL}/update`;\n    requestOptions = {\n      method: 'PUT',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        id,\n        name,\n        html,\n      }),\n    };\n  }\n  fetch(fetchURL, requestOptions)\n    .then((response) => response.json())\n    .then((result) =>\n      result.data\n        ? result.data.id\n          ? // Create a new document\n            (dispatch({\n              type: FIELD,\n              fieldName: 'documentId',\n              payload: result.data.id,\n            }),\n            dispatch({\n              type: UPDATE_ALL_DOCUMENTS,\n              payload: { _id: result.data.id, name, html },\n            }),\n            socket.emit('join', { room: result.data.id }),\n            dispatch({\n              type: JOIN_ROOM,\n              payload: result.data.id,\n            }),\n            socket.emit('newDocument', { id: result.data.id }))\n          : // Update existing document\n            (dispatch({\n              type: FIELD,\n              fieldName: 'documentId',\n              payload: result.data.value._id,\n            }),\n            dispatch({\n              type: UPDATE_ALL_DOCUMENTS,\n              payload: { _id: result.data.value._id, name, html },\n            }))\n        : (console.error(result.errors.message),\n          dispatch({ type: ERROR, payload: result.errors.message }),\n          setTimeout(() => {\n            dispatch({ type: CLEAR_ERROR });\n          }, TIME_FOR_CLEARING_SETTIMEOUT))\n    )\n    .catch((error) => {\n      dispatch({ type: ERROR, payload: error.message });\n      setTimeout(() => {\n        dispatch({ type: CLEAR_ERROR });\n      }, TIME_FOR_CLEARING_SETTIMEOUT);\n    });\n}\n","export function getFetchURL() {\n  if (process.env.NODE_ENV === 'production') {\n    return 'https://jsramverk-editor-pene14.azurewebsites.net/api/v1';\n  }\n  return 'http://localhost:1337/api/v1';\n}\n","import React from 'react';\nimport { ClearButton } from './ClearButton';\nimport { SaveButton } from './SaveButton';\n\nexport function ToolBar(props) {\n  return (\n    <>\n      <ClearButton dispatch={props.dispatch}></ClearButton>\n      <SaveButton\n        documentId={props.documentId}\n        editorText={props.editorText}\n        documentName={props.documentName}\n        dispatch={props.dispatch}\n      ></SaveButton>\n    </>\n  );\n}\n","import React, { useEffect } from 'react';\nimport { CKEditor } from '@ckeditor/ckeditor5-react';\nimport ClassicEditor from '@ckeditor/ckeditor5-build-classic';\nimport { FIELD, UPDATE_ALL_DOCUMENTS } from './documentReducer.js';\n\nimport { socket } from './socket.js';\nimport { ToolBar } from './ToolBar';\n\nexport const Editor = ({ documentId, editorText, documentName, dispatch }) => {\n  const handleChange = (editorText) => {\n    dispatch({\n      type: FIELD,\n      fieldName: 'editorText',\n      payload: editorText,\n    });\n  };\n\n  const handleDocumentNameChange = (value) => {\n    const stripNewLine = value.replaceAll('<p>&nbsp;</p>', '');\n    dispatch({ type: FIELD, fieldName: 'documentName', payload: stripNewLine });\n  };\n\n  const emitDocument = () => {\n    socket.emit('doc', {\n      id: documentId,\n      name: documentName,\n      editorText,\n    });\n\n    if (documentId) {\n      dispatch({\n        type: UPDATE_ALL_DOCUMENTS,\n        payload: { _id: documentId, name: documentName, html: editorText },\n      });\n    }\n  };\n\n  useEffect(() => {\n    socket.on('doc', (data) => {\n      dispatch({\n        type: UPDATE_ALL_DOCUMENTS,\n        payload: { _id: data.id, name: data.name, html: data.editorText },\n      });\n      if (data.hasOwnProperty('editorText')) {\n        dispatch({\n          type: FIELD,\n          fieldName: 'editorText',\n          payload: data.editorText,\n        });\n      }\n      if (data.hasOwnProperty('name')) {\n        dispatch({\n          type: FIELD,\n          fieldName: 'documentName',\n          payload: data.name,\n        });\n      }\n    });\n  }, [dispatch]);\n\n  return (\n    <>\n      <ToolBar\n        documentId={documentId}\n        editorText={editorText}\n        documentName={documentName}\n        dispatch={dispatch}\n      />\n      <div onKeyUp={emitDocument}>\n        <CKEditor\n          editor={ClassicEditor}\n          data={documentName}\n          onChange={(_event, editor) => {\n            const data = editor.getData();\n            handleDocumentNameChange(data);\n          }}\n          config={{\n            toolbar: ['bold', 'italic'],\n          }}\n        />\n      </div>\n      <div onKeyUp={emitDocument}>\n        <CKEditor\n          editor={ClassicEditor}\n          data={editorText}\n          onChange={(_event, editor) => {\n            const data = editor.getData();\n            handleChange(data);\n          }}\n        />\n      </div>\n    </>\n  );\n};\n\nexport default Editor;\n","import { useEffect } from 'react';\nimport {\n  EDIT,\n  ERROR,\n  FIELD,\n  JOIN_ROOM,\n  LEAVE_ROOM,\n  UPDATE_ALL_DOCUMENTS,\n} from './documentReducer';\nimport { getFetchURL } from './utils/getFetchURL';\nimport parse from 'html-react-parser';\nimport { socket } from './socket';\n\nexport function AllDocumentsList({ dispatch, allDocuments, joinedRooms }) {\n  let fetchURL = getFetchURL();\n  useEffect(() => {\n    fetch(fetchURL)\n      .then((response) => response.json())\n      .then((result) =>\n        result.data\n          ? dispatch({\n              type: FIELD,\n              fieldName: 'allDocuments',\n              payload: result.data,\n            })\n          : (console.error(result.errors.message),\n            dispatch({ type: ERROR, payload: result.errors.message }))\n      );\n  }, [dispatch, fetchURL]);\n\n  useEffect(() => {\n    socket.on('newDocument', ({ id }) => {\n      updateDocument(id).then((result) => {\n        dispatch({\n          type: UPDATE_ALL_DOCUMENTS,\n          payload: { _id: id, name: result.name, html: result.html },\n        });\n      });\n    });\n  }, [dispatch]);\n\n  async function updateDocument(id) {\n    const fetchURL = `${getFetchURL()}/${id}`;\n    const result = await fetch(fetchURL)\n      .then((response) => response.json())\n      .then((result) => result.data);\n    return result;\n  }\n\n  function handleClick(event, { id, name, html }) {\n    event.preventDefault();\n    updateDocument(id).then((result) => {\n      joinedRooms.forEach((room) => {\n        if (room !== id) {\n          dispatch({\n            type: LEAVE_ROOM,\n            payload: room,\n          });\n          socket.emit('leave', { room });\n        }\n      });\n\n      if (!joinedRooms.includes(id)) {\n        socket.emit('join', { room: id });\n        dispatch({\n          type: JOIN_ROOM,\n          payload: id,\n        });\n      }\n      dispatch({\n        type: EDIT,\n        payload: { id, name: result.name, html: result.html },\n      });\n      dispatch({\n        type: UPDATE_ALL_DOCUMENTS,\n        payload: { _id: id, name: result.name, html: result.html },\n      });\n    });\n  }\n\n  return (\n    <div>\n      {allDocuments.map(({ _id: id, name, html }) => (\n        <button\n          style={{\n            display: 'block',\n            cursor: 'pointer',\n            minWidth: '500px',\n            margin: 'auto',\n          }}\n          key={id}\n          onClick={(event) => {\n            handleClick(event, { id, name, html });\n          }}\n        >\n          {parse(name)}\n        </button>\n      ))}\n    </div>\n  );\n}\n","export function ErrorMessage({ error }) {\n  return (\n    <div\n      style={{\n        color: 'red',\n        position: 'absolute',\n        top: '0',\n        marginLeft: 'auto',\n        marginRight: 'auto',\n        left: 0,\n        right: 0,\n        textAlign: 'center',\n      }}\n    >\n      {error}\n    </div>\n  );\n}\n","export function SuccessMessage({ success }) {\n  return (\n    <div\n      style={{\n        color: 'green',\n        position: 'absolute',\n        top: '0',\n        marginLeft: 'auto',\n        marginRight: 'auto',\n        left: 0,\n        right: 0,\n        textAlign: 'center',\n      }}\n    >\n      {success}\n    </div>\n  );\n}\n","import './App.css';\nimport Editor from './Editor.js';\nimport { AllDocumentsList } from './AllDocumentsList';\nimport { useReducer } from 'react';\nimport { documentReducer, initialState } from './documentReducer';\nimport { ErrorMessage } from './ErrorMessage';\nimport { SuccessMessage } from './SuccessMessage';\n\nfunction App() {\n  const [\n    {\n      documentId,\n      editorText,\n      documentName,\n      allDocuments,\n      success,\n      error,\n      joinedRooms,\n    },\n    dispatch,\n  ] = useReducer(documentReducer, initialState);\n\n  return (\n    <>\n      {error ? <ErrorMessage error={error} /> : null}\n      {success ? <SuccessMessage success={success} /> : null}\n      <Editor\n        documentId={documentId}\n        editorText={editorText}\n        documentName={documentName}\n        dispatch={dispatch}\n      />\n      <AllDocumentsList\n        dispatch={dispatch}\n        allDocuments={allDocuments}\n        joinedRooms={joinedRooms}\n      />\n    </>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}