(this["webpackJsonpquill-copy-paste"]=this["webpackJsonpquill-copy-paste"]||[]).push([[0],{169:function(e,t,a){"use strict";a.r(t);var n=a(2),o=a.n(n),c=a(30),r=a.n(c),i=(a(60),a(55)),s=(a(61),a(54)),d=a.n(s),l=a(31),u=a(21),m=a(1),p=2500,h="RESET",j="FIELD",b="EDIT",f="SUCCESS",y="ERROR",O="CLEAR_ERROR",v="CLEAR_SUCCESS",x="UPDATE_ALL_DOCUMENTS",g={documentId:null,editorText:null,documentName:"",allDocuments:[],success:"",error:""};function N(e,t){switch(t.type){case j:return Object(m.a)(Object(m.a)({},e),{},Object(u.a)({},t.fieldName,t.payload));case x:if(e.allDocuments.map((function(e){return e._id})).includes(t.payload._id)){var a=e.allDocuments.findIndex((function(e){return e._id===t.payload._id})),n=Object(l.a)(e.allDocuments);return n[a]=t.payload,Object(m.a)(Object(m.a)({},e),{},{allDocuments:n})}return Object(m.a)(Object(m.a)({},e),{},{allDocuments:[].concat(Object(l.a)(e.allDocuments),[t.payload])});case v:return Object(m.a)(Object(m.a)({},e),{},{success:""});case O:return Object(m.a)(Object(m.a)({},e),{},{error:""});case y:return Object(m.a)(Object(m.a)({},e),{},{error:t.payload,success:""});case f:return Object(m.a)(Object(m.a)({},e),{},{success:t.payload,error:""});case b:return Object(m.a)(Object(m.a)({},e),{},{documentId:t.payload.id,editorText:t.payload.html,documentName:t.payload.name});case h:return Object(m.a)(Object(m.a)({},e),{},{documentId:null,editorText:null,documentName:"",success:""});default:return e}}var T=a(0),w=function(){return Object(T.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-save",viewBox:"0 0 16 16",children:Object(T.jsx)("path",{d:"M2 1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H9.5a1 1 0 0 0-1 1v7.293l2.646-2.647a.5.5 0 0 1 .708.708l-3.5 3.5a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L7.5 9.293V2a2 2 0 0 1 2-2H14a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h2.5a.5.5 0 0 1 0 1H2z"})})},D=function(){return Object(T.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-trash",viewBox:"0 0 16 16",children:[Object(T.jsx)("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"}),Object(T.jsx)("path",{fillRule:"evenodd",d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"})]})};var C={toolbar:{container:"#toolbar",handlers:{}},history:{delay:500,maxStack:100,userOnly:!0}},I=["header","font","size","bold","italic","underline","align","strike","script","blockquote","background","list","bullet","indent","link","image","color","code-block"],E=function(e){var t=e.documentName,a=e.editorText,n=e.documentId,o=e.dispatch;return Object(T.jsxs)("div",{id:"toolbar",children:[Object(T.jsx)("span",{className:"ql-formats",children:Object(T.jsx)("button",{onClick:function(){o({type:h}),o({type:f,payload:"New document created"}),setTimeout((function(){o({type:v})}),p)},children:Object(T.jsx)(D,{})})}),Object(T.jsx)("span",{className:"ql-formats",children:Object(T.jsx)("button",{onClick:function(){!function(e){var t,a,n=e.documentId,o=e.documentName,c=e.editorText,r=e.dispatch;console.log("process.env.NODE_ENV","production"),a="https://jsramverk-editor-pene14.azurewebsites.net/api/v1",n?(a="".concat(a,"/update"),t={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:n,name:o,html:c})}):(a="".concat(a,"/create"),t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:o,html:c})});var i=j,s="documentId";o?fetch(a,t).then((function(e){return e.json()})).then((function(e){return e.data?e.data.id?(r({type:i,fieldName:s,payload:e.data.id}),r({type:x,payload:{_id:e.data.id,name:o,html:c}})):(r({type:i,fieldName:s,payload:e.data.value._id}),r({type:x,payload:{_id:e.data.value._id,name:o,html:c}})):(console.error(e.errors.message),r({type:y,payload:e.errors.message}),setTimeout((function(){r({type:O})}),p))})).catch((function(e){r({type:y,payload:e.message}),setTimeout((function(){r({type:O})}),p)})):(r({type:y,payload:"Document name is empty"}),setTimeout((function(){r({type:O})}),p),console.error("Document name is empty"))}({documentName:t,editorText:a,documentId:n,dispatch:o})},children:Object(T.jsx)(w,{})})})]})},k=(a(168),function(e){var t=e.documentId,a=e.editorText,n=e.documentName,o=e.dispatch;return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)("div",{className:"text-editor",children:[Object(T.jsx)(E,{documentName:n,editorText:a,documentId:t,dispatch:o}),Object(T.jsx)("input",{style:{width:"100%"},placeholder:"Insert document name",type:"text",value:n,onChange:function(e){var t=e.target.value;o({type:j,fieldName:"documentName",payload:t})}}),Object(T.jsx)(d.a,{theme:"snow",value:a,onChange:function(e){o({type:j,fieldName:"editorText",payload:e})},placeholder:"Write something awesome or choose a saved document below...",modules:C,formats:I})]})})});function S(e){var t,a=e.dispatch,o=e.allDocuments;return t="https://jsramverk-editor-pene14.azurewebsites.net/api/v1",Object(n.useEffect)((function(){fetch(t).then((function(e){return e.json()})).then((function(e){return e.data?a({type:j,fieldName:"allDocuments",payload:e.data}):console.error(e.errors.message)}))}),[a,t]),Object(T.jsx)("div",{children:o.map((function(e){var t=e._id,n=e.name,o=e.html;return Object(T.jsx)("button",{style:{display:"block",cursor:"pointer",minWidth:"500px",margin:"auto"},onClick:function(e){!function(e,t){var n=t.id,o=t.name,c=t.html;e.preventDefault(),a({type:b,payload:{id:n,name:o,html:c}})}(e,{id:t,name:n,html:o})},children:n},t)}))})}var _=function(){var e=Object(n.useReducer)(N,g),t=Object(i.a)(e,2),a=t[0],o=a.documentId,c=a.editorText,r=a.documentName,s=a.allDocuments,d=a.success,l=a.error,u=t[1];return Object(T.jsxs)(T.Fragment,{children:[l?Object(T.jsx)("div",{style:{color:"red",position:"absolute",top:"0",marginLeft:"auto",marginRight:"auto",left:0,right:0,textAlign:"center"},children:l}):null,d?Object(T.jsx)("div",{style:{color:"green",position:"absolute",top:"0",marginLeft:"auto",marginRight:"auto",left:0,right:0,textAlign:"center"},children:d}):null,Object(T.jsx)(k,{documentId:o,editorText:c,documentName:r,dispatch:u}),Object(T.jsx)(S,{dispatch:u,allDocuments:s})]})},R=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,170)).then((function(t){var a=t.getCLS,n=t.getFID,o=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),n(e),o(e),c(e),r(e)}))};r.a.render(Object(T.jsx)(o.a.StrictMode,{children:Object(T.jsx)(_,{})}),document.getElementById("root")),R()},60:function(e,t,a){},61:function(e,t,a){}},[[169,1,2]]]);
//# sourceMappingURL=main.479ca346.chunk.js.map